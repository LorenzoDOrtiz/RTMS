@page "/workouts/edit-workout-template/{Id:int}"

@inject IViewWorkoutTemplateUseCase ViewWorkoutUseCase
@inject IEditWorkoutTemplateUseCase EditWorkoutUseCase
@inject NavigationManager NavigationManager

<PageTitle>Edit Workout</PageTitle>

<AddEditWorkoutTemplate IsForEdit="true"
                        WorkoutTemplate="@workoutTemplate"
                        OnSave="HandleSave" />

@code {
    [Parameter]
    public int Id { get; set; }

    private WorkoutTemplate workoutTemplate;

    protected override async Task OnInitializedAsync()
    {
        // Use the Id to fetch the workout details and populate the form
        workoutTemplate = await ViewWorkoutUseCase.ExecuteAsync(Id);
    }

    private async Task HandleSave()
    {
        await EditWorkoutUseCase.ExecuteAsync(workoutTemplate);
        NavigationManager.NavigateTo("/workouts");
    }
}